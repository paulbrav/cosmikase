defaults:
  install: true
  ghostty: true
  yubikey_setup: false
  theme: nord
  # Firmware/recovery steps run after core apt installs; they require fwupd (fwupdmgr)
  # and pop-upgrade to be present on PATH.
  run_fw_update: true
  run_recovery_upgrade: false

apt:
  # ─────────────────────────────────────────────────────────────────────────────
  # Core CLI Tools
  # ─────────────────────────────────────────────────────────────────────────────
  core:
    # Shell & Navigation
    - { name: zoxide, desc: "Smarter cd command that remembers frequent paths", install: true }
    - { name: fzf, desc: "General-purpose command-line fuzzy finder", install: true }
    - { name: tmux, desc: "Terminal multiplexer for multiple sessions", install: true }
    - { name: mosh, desc: "Mobile shell with roaming and intermittent connectivity", install: true }

    # File Management
    - { name: eza, desc: "Modern replacement for ls", install: true }
    - { name: tree, desc: "Recursive directory listing", install: true }
    - { name: fd-find, desc: "Fast alternative to find", alias: fdfind, install: true }
    - { name: ncdu, desc: "NCurses Disk Usage analyzer", install: true }
    - { name: trash-cli, desc: "CLI for freedesktop.org Trash", install: true }
    - { name: atool, desc: "Script for managing file archives", install: true }
    - { name: unzip, desc: "De-archiver for .zip files", install: true }
    - { name: p7zip-full, desc: "7zip archive support", install: true }
    - { name: rsync, desc: "Fast, versatile file-copying tool", install: true }
    - { name: pv, desc: "Pipe viewer for monitoring data flow", install: true }

    # Text & Search
    - { name: ripgrep, desc: "Fast line-oriented search tool", install: true }
    - { name: bat, desc: "Cat clone with syntax highlighting", install: true }
    - { name: jq, desc: "Command-line JSON processor", install: true }
    - { name: neovim, desc: "Hyperextensible Vim-based text editor", install: true }

    # Network & Transfer
    - { name: curl, desc: "CLI tool for transferring data with URLs", install: true }
    - { name: wget, desc: "Network utility to retrieve files", install: true }
    - { name: sshfs, desc: "Filesystem client based on SSH", install: true }
    - { name: tcpdump, desc: "Command-line packet analyzer", install: true }
    - { name: net-tools, desc: "ifconfig, netstat (legacy but useful)", install: true }
    - { name: nmap, desc: "Network scanner", install: true }
    - { name: socat, desc: "Multipurpose relay for data transfer", install: true }

    # Version Control
    - { name: git, desc: "Distributed version control system", install: true }
    - { name: git-lfs, desc: "Git extension for large files", install: true }
    - { name: gh, desc: "GitHub CLI", install: true }

    # Build & Development
    - { name: build-essential, desc: "Essential build packages (gcc, make)", install: true }
    - { name: cmake, desc: "Cross-platform build system", install: true }
    - { name: ninja-build, desc: "Fast build system", install: true }
    - { name: pkg-config, desc: "Helper for compiling applications", install: true }
    - { name: shellcheck, desc: "Static analysis for shell scripts", install: true }
    - { name: entr, desc: "Run commands when files change", install: true }
    - { name: direnv, desc: "Directory-based environment variables", install: true }
    - { name: sqlite3, desc: "SQLite database CLI", install: true }

    # Debugging & Profiling
    - { name: gdb, desc: "GNU Project Debugger", install: true }
    - { name: valgrind, desc: "Dynamic analysis framework", install: true }
    - { name: strace, desc: "System call tracer", install: true }
    - { name: lsof, desc: "List open files", install: true }
    - { name: hyperfine, desc: "Command-line benchmarking tool", install: true }
    - { name: btop, desc: "Resource monitor for CPU, memory, disk, network", install: true }

    # Python & REPL
    - { name: bpython, desc: "Fancy Python interpreter interface", install: true }

    # Documentation
    - { name: tldr, desc: "Simplified community-driven man pages", install: true }

    # Media
    - { name: ffmpeg, desc: "Multimedia framework for video/audio", install: true }

    # Fonts & Display
    - { name: fontconfig, desc: "Font configuration library", install: true }
    - { name: wl-clipboard, desc: "Wayland clipboard utilities", install: true }
    - { name: xclip, desc: "X11 clipboard utility", install: true }

    # Security
    - { name: age, desc: "Modern file encryption (simpler than GPG)", install: true }

    # Backup
    - { name: timeshift, desc: "System restore tool", install: true }
    - { name: restic, desc: "Fast, secure backup program", install: true }

    # Security & Sandboxing
    - { name: firejail, desc: "SUID sandbox program", install: true }
    - { name: firejail-profiles, desc: "Profiles for Firejail", install: true }
    - { name: fprintd, desc: "Fingerprint reader daemon", install: true }
    - { name: libpam-fprintd, desc: "PAM module for fingerprint auth", install: true }

  # ─────────────────────────────────────────────────────────────────────────────
  # Terminal Emulators
  # ─────────────────────────────────────────────────────────────────────────────
  terminal:
    - name: ghostty
      desc: Fast, feature-rich terminal emulator (GPU-accelerated)
      source: source
      note: "Built from source (requires Zig 0.15+)"
      install: true
    - { name: kitty, desc: "GPU-based terminal emulator", install: true }
    - { name: alacritty, desc: "OpenGL terminal emulator", install: true }

  # ─────────────────────────────────────────────────────────────────────────────
  # GUI Applications
  # ─────────────────────────────────────────────────────────────────────────────
  gui:
    - { name: xournalpp, desc: "Handwriting & PDF annotation", install: true }
    - { name: vlc, desc: "Multimedia player and streamer", install: true }
    - { name: firefox, desc: "Web browser", install: true }
    - { name: fonts-jetbrains-mono, desc: "Developer typeface", install: true }

  # ─────────────────────────────────────────────────────────────────────────────
  # Containers & Gaming
  # ─────────────────────────────────────────────────────────────────────────────
  system:
    - { name: docker.io, desc: "Linux container engine", install: true }
    - { name: steam-installer, desc: "Steam gaming platform", install: false }

  # ─────────────────────────────────────────────────────────────────────────────
  # YubiKey / FIDO2
  # ─────────────────────────────────────────────────────────────────────────────
  yubikey:
    - { name: yubikey-manager, desc: "YubiKey configuration tool", install: true }
    - { name: libpam-u2f, desc: "U2F PAM module", install: true }
    - { name: pamu2fcfg, desc: "U2F PAM configuration tool", install: true }
    - { name: libfido2-1, desc: "FIDO 2.0 library", install: true }
    - { name: fido2-tools, desc: "FIDO 2.0 CLI tools", install: true }

# ═══════════════════════════════════════════════════════════════════════════════
# FLATPAK APPLICATIONS
# ═══════════════════════════════════════════════════════════════════════════════
flatpak:
  apps:
    # Productivity
    - { id: md.obsidian.Obsidian, desc: "Knowledge base / Markdown notes", install: true }
    - { id: com.todoist.Todoist, desc: "Task management (Linear integration via Zapier)", install: true }
    - { id: org.onlyoffice.desktopeditors, desc: "Office suite", install: true }

    # Design
    - { id: org.gimp.GIMP, desc: "Image editing", install: false }
    - { id: org.inkscape.Inkscape, desc: "Vector graphics", install: false }

    # API Development
    - { id: com.usebruno.Bruno, desc: "API client (Postman alternative)", install: true }

    # Communication
    - { id: com.discordapp.Discord, desc: "Voice and text chat", install: true }
    - { id: org.signal.Signal, desc: "Encrypted messaging", install: true }
    - { id: org.telegram.desktop, desc: "Telegram messaging", install: true }

    # Security & Privacy
    - { id: com.bitwarden.desktop, desc: "Password manager", install: true }
    - { id: com.protonvpn.www, desc: "VPN service", install: true }
    - { id: me.proton.Mail, desc: "Encrypted email", install: true }
    - { id: me.proton.Pass, desc: "Proton password manager", install: false }

    # Browsers
    - { id: org.chromium.Chromium, desc: "Open source browser", install: true }
    - { id: com.brave.Browser, desc: "Privacy browser", install: false }

    # Utilities
    - { id: org.localsend.localsend_app, desc: "Cross-platform file sharing", install: true }
    - { id: com.github.tchx84.Flatseal, desc: "Flatpak permissions manager", install: true }
    - { id: com.system76.KeyboardConfigurator, desc: "System76 keyboard config", install: false }

    # Media
    - { id: com.spotify.Client, desc: "Music streaming", install: false }

# ═══════════════════════════════════════════════════════════════════════════════
# FONTS
# ═══════════════════════════════════════════════════════════════════════════════
fonts:
  nerd:
    - { name: "JetBrainsMono Nerd Font", desc: "Developer font with icons", url: "https://github.com/ryanoasis/nerd-fonts/releases/latest/download/JetBrainsMono.zip", install: true }

# ═══════════════════════════════════════════════════════════════════════════════
# WEB APPS (PWA / Desktop Shortcuts)
# ═══════════════════════════════════════════════════════════════════════════════
web:
  apps:
    - { name: Slack, desc: "Team collaboration", url: "https://slack.com", icon_url: "https://a.slack-edge.com/80588/marketing/img/icons/icon_slack_hash_colored.png", install: true }
    - { name: Superhuman, desc: "Fast email client", url: "https://superhuman.com", icon_url: "https://superhuman.com/favicon.ico", install: true }
    - { name: Linear, desc: "Issue tracking", url: "https://linear.app", icon_url: "https://linear.app/favicon.ico", install: true }

# ═══════════════════════════════════════════════════════════════════════════════
# LANGUAGE RUNTIMES & PACKAGE MANAGERS
# ═══════════════════════════════════════════════════════════════════════════════
installers:
  runtimes:
    # Systems Languages
    - { name: rust, desc: "Systems programming language", method: script, url: "https://sh.rustup.rs", args: "-y", check: rustc, install: true }
    - { name: go, desc: "Go programming language", method: tarball, url: "https://go.dev/dl/go1.24.4.linux-amd64.tar.gz", check: go, install: true }
    - { name: zig, desc: "Zig (required for Ghostty)", method: tarball, url: "https://ziglang.org/download/0.15.2/zig-x86_64-linux-0.15.2.tar.xz", version: "0.15.2", check: zig, install: true }

    # JavaScript/TypeScript
    - { name: nvm, desc: "Node Version Manager", method: custom_nvm, check: nvm, install: true }
    - { name: bun, desc: "Fast all-in-one JavaScript runtime", method: script, url: "https://bun.sh/install", check: bun, install: true }

    # Python
    - { name: uv, desc: "Extremely fast Python package installer", method: script, url: "https://astral.sh/uv/install.sh", check: uv, install: true }

    # Scientific
    - { name: julia, desc: "High-performance scientific language", method: script, url: "https://install.julialang.org", args: "-y", check: julia, install: true }

    # Shell Tools
    - { name: starship, desc: "Blazing-fast shell prompt", method: script, url: "https://starship.rs/install.sh", check: starship, install: true }

  # ─────────────────────────────────────────────────────────────────────────────
  # AI Coding Tools
  # ─────────────────────────────────────────────────────────────────────────────
  ai_tools:
    - { name: cursor, desc: "AI Code Editor", method: deb, deb_url: "https://api2.cursor.sh/updates/download/golden/linux-x64-deb/cursor/latest", check: cursor, install: true }
    - { name: cursor-agent, desc: "Cursor AI Agent CLI", method: script, url: "https://cursor.com/install", check: cursor-agent, install: true }
    - { name: claude-code, desc: "Claude AI coding assistant", method: npm, check: claude, install: true }
    - { name: opencode, desc: "Open source AI assistant", method: bun, bun_package: opencode-ai, check: opencode, install: true }
    - { name: antigravity, desc: "Google Antigravity", method: custom_antigravity, check: antigravity, install: true }
    - { name: codex, desc: "OpenAI Codex CLI", method: npm, npm_package: "@openai/codex", check: codex, install: false }
    - { name: amp, desc: "AI coding agent", method: manual, note: "See https://ampcode.com", install: false }

  # ─────────────────────────────────────────────────────────────────────────────
  # Security Tools
  # ─────────────────────────────────────────────────────────────────────────────
  security:
    - { name: brave-browser, desc: "Privacy browser (official DEB)", method: custom_brave, check: brave-browser, install: true }
    - { name: dangerzone, desc: "Sanitize dangerous PDFs/docs", method: custom_dangerzone, install: true }

# ═══════════════════════════════════════════════════════════════════════════════
# LANGUAGE-SPECIFIC TOOLS
# ═══════════════════════════════════════════════════════════════════════════════

# Rust (cargo install)
cargo_tools:
  - { name: zellij, desc: "Terminal workspace with batteries included", install: true }
  - { name: git-delta, desc: "Beautiful git diff viewer", install: true }
  - { name: sd, desc: "Modern sed replacement", install: true }
  - { name: tokei, desc: "Code statistics by language", install: true }
  - { name: procs, desc: "Modern ps replacement", install: true }

# Go (go install)
go_tools:
  - { name: gum, desc: "Glamorous shell scripts", package: "github.com/charmbracelet/gum@latest", install: true }
  - { name: lazygit, desc: "Terminal UI for git", package: "github.com/jesseduffield/lazygit@latest", install: true }
  - { name: lazydocker, desc: "Terminal UI for Docker", package: "github.com/jesseduffield/lazydocker@latest", install: true }
  - { name: dive, desc: "Explore Docker image layers", package: "github.com/wagoodman/dive@latest", install: true }
  - { name: croc, desc: "Secure file transfer", package: "github.com/schollz/croc/v10@latest", install: true }

# Python (uv tool install)
uv_tools:
  # Linting & Formatting
  - { name: ruff, desc: "Fast Python linter and formatter", install: true }
  # Type Checking
  - { name: pyrefly, desc: "Fast type checker from Meta", install: true }
  - { name: ty, desc: "Type checking tool", install: true }
  - { name: mypy, desc: "Static type checker", install: false }
  # Data Science
  - { name: jupyterlab, desc: "JupyterLab environment", install: true }
  - { name: jupyter-core, desc: "Jupyter core functionality", install: true }
  - { name: jupyter-client, desc: "Jupyter protocol client", install: true }
  - { name: huggingface-hub, desc: "Hugging Face Hub client", install: true }
  # AI/ML
  - { name: mojo, desc: "AI programming language", install: true }
  - { name: vllm, desc: "High-throughput LLM serving", install: false }

# Node.js (npm install -g)
npm:
  - { name: "@openai/codex", desc: "OpenAI Codex CLI", version: latest, install: true }
  - { name: "@bitwarden/cli", desc: "Bitwarden CLI for chezmoi", version: latest, install: true }
  - { name: "@withgraphite/graphite-cli", desc: "Git branch stacking CLI", version: latest, install: true }

scripts: []

# ═══════════════════════════════════════════════════════════════════════════════
# THEMES
# ═══════════════════════════════════════════════════════════════════════════════
themes:
  default: osaka-jade
  available:
    # Dark themes
    - catppuccin
    - cosmic-dark
    - ethereal
    - everforest
    - gruvbox
    - hackerman
    - kanagawa
    - matte-black
    - nord
    - osaka-jade
    - pop-default
    - ristretto
    - rose-pine
    - tokyo-night
    # Light themes
    - catppuccin-latte
    - cosmic-light
    - flexoki-light
  paths:
    base: ~/.local/share/cosmikase/themes

# ═══════════════════════════════════════════════════════════════════════════════
# HARDWARE-SPECIFIC NOTES
# ═══════════════════════════════════════════════════════════════════════════════
hp_zbook_ultra:
  emit_notes: true
  oem_kernel: linux-oem-24.04c
  warn_on_mix: true
  notes: |
    Pop!_OS uses its own kernel. HP ZBook Ultra G1a hardware status:
    - Fingerprint: Works with fprintd after firmware update (fwupdmgr update)
    - Webcam: Requires AMD ISP4 driver, expected in mainline kernel 6.18
      Current workaround: Ubuntu 24.04 with linux-image-oem-24.04c
    - WiFi (MT7925): May have stability issues, improved in kernel 6.16+



